@model FGMC.LoanLogicsQC.Web.ViewModels.EncompassUserViewModel
@{
    ViewBag.Title = "Manage Users";
    // Layout = null;
}
<head>
    <title> @ViewBag.Title </title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="~/Scripts/jquery.dataTables.min.js" type="text/javascript" charset="utf8"></script>
    <script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    @*<link href="~/Content/style.css" rel="stylesheet"/>*@
    <link href="~/Content/CommonStyleSheet.css" rel="stylesheet" />
    <script src="~/Scripts/html5.js"></script>
    <script src="~/Scripts/dataTables.bootstrap.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    @*<link rel="stylesheet"  href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">*@
    <link href="~/Content/dataTables.bootstrap.min.css" rel="stylesheet" />
    <script src="~/Scripts/Validations.js"></script>
    <script type="text/javascript">
        function preventBack() { window.history.forward(); }

        setTimeout("preventBack()", 0);
        window.onunload = function() { null };
    </script>

</head>

<div class="newMenuBar" id="newMenuBar">
    <ul class="home-nav text-left">

        
       @if (Session["CurrentlyLoggedInUser"] != null)
        {

     <li>@Html.ActionLink("Search Loans", "SearchLoans", "SearchLoans") </li>

        }

@if (Session["IsAdmin"] != null)
{
    if ((bool) Session["IsAdmin"])
     {
         <li>@Html.ActionLink("Manage Configurations", "Configurator", "ApplicationConfiguration") </li>

     }
}
       

        @*@if (Session["CurrentlyLoggedInUser"] != null)
        {

            <li>@Html.ActionLink("Reports", "Report", "GenerateReport") </li>

        }*@

    </ul>

</div>


<div class="alert alert-success" id="Sucessinfo">
    <h5><span></span></h5>
</div>
<div class="alert alert-danger" id="ErrorInfo">
    <h5><span></span></h5>
</div>

<div class="form-wrap">
    <h3>Add New User</h3>

    <form method="post" class="form-horizontal wrap" action="@Url.Action("UserDetails", "ManageUser")">
        @if (Model != null)
        {
            <div class="row">
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        <label class="col-lg-3" for="">Encompass User Id</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" id="Userid" name="Userid" value="@Model.CurrentEncompassUser.UserId">
                        </div>
                        <div class="col-lg-2">
                            <button type="submit" class="btn btn-default" id="Lookup" name="command" value="Lookup" onclick="return ValidateUserId();"><span class="glyphicon glyphicon-search"></span>Lookup</button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                    <label class="col-lg-3"></label>
                    <div class="col-lg-5 marL15">
                        <div class="form-group">
                            <label class="checkbox-inline"><input type="checkbox" name="IsAdmin" id="IsAdmin" value="true">App Administrator</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        <label class="col-lg-3" for="">First Name</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" name="FirstName" id="FirstName" value="@Model.CurrentEncompassUser.FirstName" readonly="readonly">
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        <label class="col-lg-3" for="">Last Name</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" name="LastName" id="LastName" value="@Model.CurrentEncompassUser.LastName" readonly="readonly">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        <label class="col-lg-3" for="">Email</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" name="Email" id="Email" value="@Model.CurrentEncompassUser.Email" readonly="readonly">
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        <label class="col-lg-3" for="">Account Status</label>
                        <div class="col-lg-5">
                            <select disabled name="AccountStatus" id="AccountStatus" class="form-control">

                                <option selected="selected" disabled="disabled"> @Model.CurrentEncompassUser.AccountStatus</option>

                                <option selected="selected" disabled="disabled">@Model.CurrentEncompassUser.AccountStatus</option>

                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row text-right mrgB">
                <div class="col-lg-10">
                    <button type="submit" id="btnSave" name="Command" value="addnew" onclick="return CheckStatus();" class="btn btn-default">Add User</button>
                    <button type="button" id="btnSubmit" name="Command" value="clearnew" onclick="clearFieldValues();" class="btn btn-default">Clear</button>
                </div>
            </div>
        }





        @if (!string.IsNullOrEmpty(@ViewBag.Failure))
        {

            <script type="text/javascript">

                showInfoMsg("ErrorInfo", "" + '@ViewBag.Failure' + "");   // NoUsers

                function showInfoMsg(infoWrapId, msg) {

                    $('#' + infoWrapId).show();
                    $('#' + infoWrapId).find('span').html(msg);
                }

            </script>
        }

        @Html.Partial("_UserGrid" ,Model)

        @if (!string.IsNullOrEmpty(@ViewBag.Success))       //UserAdded
        {

            <script type="text/javascript">

                showInfoMsg("Sucessinfo", "" + '@ViewBag.Success' + "");

                function showInfoMsg(infoWrapId, msg) {

                    $('#' + infoWrapId).show();
                    $('#' + infoWrapId).find('span').html(msg);
                }

            </script>
        }

        <script>
    $(document).ready(function() {
        $('#manageUser').hide();

            @*$('#headerText').text('@System.Configuration.ConfigurationManager.AppSettings["wareHouseApplicationHdrText"]');*@
               var copyRightText = "<span class= 'copyRight'> Copyright &copy; @DateTime.Now.Year.ToString() @System.Configuration.ConfigurationManager.AppSettings["companyName"] @System.Configuration.ConfigurationManager.AppSettings["companyAddress"] </span>";
           var appName = '@System.Configuration.ConfigurationManager.AppSettings["wareHouseApplicationFtrText"]';
           //$('#footerText').text(appName).append(copyRightText);
                //var footerText = $('#footerText').html();
        //var footerTextWithFomatting = footerText.replace('Encompass Utility V1.0 - FGMC', 'Warehouse Transfer Updater V1.0 - FGMC');
        //$('#footerText').html(footerTextWithFomatting);


    });

        </script>
    </form>

</div>

