@model FGMC.LoanLogicsQC.Web.ViewModels.ConfigurationViewModel

@{
    ViewBag.Title = "Configurator";
}

<head>

    <title> @ViewBag.Title </title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.css"/>

    <script src="~/Scripts/jquery.dataTables.min.js" type="text/javascript" charset="utf8"></script>
    <script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
    @*<link href="~/Content/style.css" rel="stylesheet"/>*@
    <link href="~/Content/CommonStyleSheet.css" rel="stylesheet" />
    <script src="~/Scripts/html5.js"></script>
    <script src="~/Scripts/dataTables.bootstrap.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    @*<link rel="stylesheet"  href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">*@
    <link href="~/Content/dataTables.bootstrap.min.css" rel="stylesheet"/>
    <script src="~/Scripts/Validations.js"></script>
    <script type="text/javascript">
        function preventBack() { window.history.forward(); }

        setTimeout("preventBack()", 0);
        window.onunload = function() { null };
    </script>
    <style>
        .popUpTitleBar {
            background: steelblue;
            height: 35px;
            padding-left: 10px;
            line-height: 35px;
            margin-bottom: 30px;
            color: white;
        }
    </style>
</head>

     <div class="alert alert-success" id="Sucessinfo">
    <h5><span></span></h5>
</div>
<div class="alert alert-danger" id="ErrorInfo">
    <h5><span></span></h5>
</div>


<div id="partialView">
    <div class="popUpTitleBar" >Add Configurations </div>
    @Html.Partial("_AddUser", Model.CurrentConfiguration)
    </div>

<div id="updatePartialView">
   
</div>


<div class="newMenuBar" id="newMenuBar">
    <ul class="home-nav text-left">

@if (Session["IsAdmin"] != null)
{
    if ((bool) Session["IsAdmin"])
    {
        <li>@Html.ActionLink("Manage Users", "UserDetails", "ManageUser", null, new {id = "homepage"}) </li>
    }
}
        @if (Session["CurrentlyLoggedInUser"] != null)
        {

            <li>@Html.ActionLink("Search Loans", "SearchLoans", "SearchLoans") </li>
        }
        @*@if (Session["CurrentlyLoggedInUser"] != null)
        {
            <li>@Html.ActionLink("Reports", "Report", "GenerateReport") </li>

        }*@

    </ul>

</div>


@using (Html.BeginForm())
{
    <section class="container-fluid">
        <div class="contant-wrap">
            <h3 class="mrgB">Manage Configurations</h3>

            <div class="row wrap">
                <div class="col-lg-12 text-right">
                    <button type="button" class="btn btn-default" id="addPopUp" name="command" value="Add"> Add</button>
                </div>

            </div>

            @if (Model != null)
            {
            if (Model.Configurations != null)
            {
            <table border="1" class="table table-bordered table-hover table-striped" id="Config">
                <thead>
                    <tr>
                        <th>Configuration Type</th>
                        <th>Configuration Key</th>
                        <th>Configuration Value</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Configurations.Count > 0)
                {

                    foreach (var config in Model.Configurations)
                    {
                            <tr>
                                <td>@config.ConfigurationTypeName </td>
                                <td>@config.ConfigurationName </td>
                                <td>@config.ConfigurationValue </td>
                                <td config="center">
                                    <button type="button" name="Command" data-id="@config.ConfigurationId" id="editConfig" value="@config.ConfigurationId"> <img src="~/Images/edit.png" width="30" height="30"></button> <span style="padding-left:5px;"></span>
                                    @*<button type="button" name="Command" id="remove" data-id="@config.ConfigurationId"><img src="~/Images/delete.png" width="30" height="30"></button>*@
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="6"> No matching records found  </td>
                        </tr>

                    }
                </tbody>
            </table>
            }
            }
        </div>
    </section>
}

        @if (!string.IsNullOrEmpty(Convert.ToString(@TempData["ConfigAdded"])))
        {
            <script type="text/javascript">

                showInfoMsg("Sucessinfo", "" + '@TempData["ConfigAdded"]' + "");

                function showInfoMsg(infoWrapId, msg) {

                    $('#' + infoWrapId).show();
                    $('#' + infoWrapId).find('span').html(msg);
                }

            </script>
        }

        @if (!string.IsNullOrEmpty(Convert.ToString(@TempData["ConfigUpdated"])))
        {
            <script type="text/javascript">

                showInfoMsg("Sucessinfo", "" + '@TempData["ConfigUpdated"]' + "");

                function showInfoMsg(infoWrapId, msg) {

                    $('#' + infoWrapId).show();
                    $('#' + infoWrapId).find('span').html(msg);
                }

            </script>
        }

@if (!string.IsNullOrEmpty(Convert.ToString(@TempData["MergeSortOrderCheck"])))
{
    <script type="text/javascript">

        showInfoMsg("ErrorInfo", "" + '@TempData["MergeSortOrderCheck"]' + "");

                function showInfoMsg(infoWrapId, msg) {

                    $('#' + infoWrapId).show();
                    $('#' + infoWrapId).find('span').html(msg);
                }

    </script>
}
@* below code added by waris*@
@if (!string.IsNullOrEmpty(Convert.ToString(@TempData["ConfigKeyIsPresent"])))
{
    <script type="text/javascript">

        showInfoMsg("ErrorInfo", "" + '@TempData["ConfigKeyIsPresent"]' + "");

        function showInfoMsg(infoWrapId, msg) {

            $('#' + infoWrapId).show();
            $('#' + infoWrapId).find('span').html(msg);
        }

    </script>
}
 @*ends here*@



@****** PLEASE DON'T DELETE BELOW COMMENTED CODE ******@
        @*@if (!string.IsNullOrEmpty(Convert.ToString(TempData["ConfigRemoved"])))
            {
                <script type="text/javascript">

                    showInfoMsg("Sucessinfo", "" + '@TempData["ConfigRemoved"]' + "");

                    function showInfoMsg(infoWrapId, msg) {

                        $('#' + infoWrapId).show();
                        $('#' + infoWrapId).find('span').html(msg);
                    }

                </script>
            }*@


        <style>
            .no-close .ui-dialog-titlebar-close {
                display: none;
            }

            .ui-dialog-titlebar {
                display: none;
            }
        </style>
<script src="~/Scripts/Configurator.js"></script>
      <script>
            function showInfoMsg(infoWrapId, msg) {

                $('#' + infoWrapId).show();
                $('#' + infoWrapId).find('span').html(msg);
            }
        </script>





